/*!
 * TouchSlide v1.1
 * javascript触屏滑动特效插件，移动端滑动特效，触屏焦点图，触屏Tab切换，触屏多图切换等
 * 详尽信息请看官网：http://www.SuperSlide2.com/TouchSlide/
 *
 * Copyright 2013 大话主席
 *
 * 请尊重原创，保留头部版权
 * 在保留版权的前提下可应用于个人或商业用途

 * 1.1 宽度自适应（修复安卓横屏时滑动范围不变的bug）
 */
;var TouchSlide=function(C){C=C||{};var D={slideCell:C.slideCell||"#touchSlide",titCell:C.titCell||".hd li",mainCell:C.mainCell||".bd",effect:C.effect||"left",autoPlay:C.autoPlay||!1,delayTime:C.delayTime||200,interTime:C.interTime||2500,defaultIndex:C.defaultIndex||0,titOnClassName:C.titOnClassName||"on",autoPage:C.autoPage||!1,prevCell:C.prevCell||".prev",nextCell:C.nextCell||".next",pageStateCell:C.pageStateCell||".pageState",pnLoop:"undefined "==C.pnLoop?!0:C.pnLoop,startFun:C.startFun||null,endFun:C.endFun||null,switchLoad:C.switchLoad||null},E=document.getElementById(D.slideCell.replace("#",""));if(!E){return !1}var G=function(ag,ah){ag=ag.split(" ");var f=[];ah=ah||document;var F=[ah];for(var L in ag){0!=ag[L].length&&f.push(ag[L])}for(var L in f){if(0==F.length){return !1}var ab=[];for(var ac in F){if("#"==f[L][0]){ab.push(document.getElementById(f[L].replace("#","")))}else{if("."==f[L][0]){for(var ad=F[ac].getElementsByTagName("*"),ae=0;ae<ad.length;ae++){var af=ad[ae].className;af&&-1!=af.search(new RegExp("\\b"+f[L].replace(".","")+"\\b"))&&ab.push(ad[ae])}}else{for(var ad=F[ac].getElementsByTagName(f[L]),ae=0;ae<ad.length;ae++){ab.push(ad[ae])}}}}F=ab}return 0==F.length||F[0]==ah?!1:F},H=function(L,ab){var f=document.createElement("div");f.innerHTML=ab,f=f.children[0];var F=L.cloneNode(!0);return f.appendChild(F),L.parentNode.replaceChild(f,L),P=F,f},I=function(f,F){!f||!F||f.className&&-1!=f.className.search(new RegExp("\\b"+F+"\\b"))||(f.className+=(f.className?" ":"")+F)},J=function(f,F){!f||!F||f.className&&-1==f.className.search(new RegExp("\\b"+F+"\\b"))||(f.className=f.className.replace(new RegExp("\\s*\\b"+F+"\\b","g"),""))},K=D.effect,M=G(D.prevCell,E)[0],N=G(D.nextCell,E)[0],O=G(D.pageStateCell)[0],P=G(D.mainCell,E)[0];if(!P){return !1}var r,s,Q=P.children.length,R=G(D.titCell,E),S=R?R.length:Q,T=D.switchLoad,U=parseInt(D.defaultIndex),V=parseInt(D.delayTime),W=parseInt(D.interTime),X="false"==D.autoPlay||0==D.autoPlay?!1:!0,Y="false"==D.autoPage||0==D.autoPage?!1:!0,Z="false"==D.pnLoop||0==D.pnLoop?!1:!0,a=U,b=null,c=null,e=null,g=0,h=0,i=0,j=0,k=/hp-tablet/gi.test(navigator.appVersion),l="ontouchstart" in window&&!k,m=l?"touchstart":"mousedown",o=l?"touchmove":"",p=l?"touchend":"mouseup",q=P.parentNode.clientWidth,t=Q;if(0==S&&(S=Q),Y){S=Q,R=R[0],R.innerHTML="";var v="";if(1==D.autoPage||"true"==D.autoPage){for(var w=0;S>w;w++){v+="<li>"+(w+1)+"</li>"}}else{for(var w=0;S>w;w++){v+=D.autoPage.replace("$",w+1)}}R.innerHTML=v,R=R.children}"leftLoop"==K&&(t+=2,P.appendChild(P.children[0].cloneNode(!0)),P.insertBefore(P.children[Q-1].cloneNode(!0),P.children[0])),r=H(P,'<div class="tempWrap" style="overflow:hidden; position:relative;"></div>'),P.style.cssText="width:"+t*q+"px;position:relative;overflow:hidden;padding:0;margin:0;";for(var w=0;t>w;w++){P.children[w].style.cssText="display:table-cell;vertical-align:top;width:"+q+"px"}var x=function(){"function"==typeof D.startFun&&D.startFun(U,S)},y=function(){"function"==typeof D.endFun&&D.endFun(U,S)},z=function(F){var L=("leftLoop"==K?U+1:U)+F,f=function(ac){for(var ad=P.children[ac].getElementsByTagName("img"),ab=0;ab<ad.length;ab++){ad[ab].getAttribute(T)&&(ad[ab].setAttribute("src",ad[ab].getAttribute(T)),ad[ab].removeAttribute(T))}};if(f(L),"leftLoop"==K){switch(L){case 0:f(Q);break;case 1:f(Q+1);break;case Q:f(0);break;case Q+1:f(1)}}},A=function(){q=r.clientWidth,P.style.width=t*q+"px";for(var f=0;t>f;f++){P.children[f].style.width=q+"px"}var F="leftLoop"==K?U+1:U;B(-F*q,0)};window.addEventListener("resize",A,!1);var B=function(F,L,f){f=f?f.style:P.style,f.webkitTransitionDuration=f.MozTransitionDuration=f.msTransitionDuration=f.OTransitionDuration=f.transitionDuration=L+"ms",f.webkitTransform="translate("+F+"px,0)translateZ(0)",f.msTransform=f.MozTransform=f.OTransform="translateX("+F+"px)"},n=function(f){switch(K){case"left":U>=S?U=f?U-1:0:0>U&&(U=f?0:S-1),null!=T&&z(0),B(-U*q,V),a=U;break;case"leftLoop":null!=T&&z(0),B(-(U+1)*q,V),-1==U?(c=setTimeout(function(){B(-S*q,0)},V),U=S-1):U==S&&(c=setTimeout(function(){B(-q,0)},V),U=0),a=U}x(),e=setTimeout(function(){y()},V);for(var F=0;S>F;F++){J(R[F],D.titOnClassName),F==U&&I(R[F],D.titOnClassName)}0==Z&&(J(N,"nextStop"),J(M,"prevStop"),0==U?I(M,"prevStop"):U==S-1&&I(N,"nextStop")),O&&(O.innerHTML="<span>"+(U+1)+"</span>/"+S)};if(n(),X&&(b=setInterval(function(){U++,n()},W)),R){for(var w=0;S>w;w++){!function(){var f=w;R[f].addEventListener("click",function(){clearTimeout(c),clearTimeout(e),U=f,n()})}()}}N&&N.addEventListener("click",function(){(1==Z||U!=S-1)&&(clearTimeout(c),clearTimeout(e),U++,n())}),M&&M.addEventListener("click",function(){(1==Z||0!=U)&&(clearTimeout(c),clearTimeout(e),U--,n())});var u=function(f){clearTimeout(c),clearTimeout(e),s=void 0,i=0;var F=l?f.touches[0]:f;g=F.pageX,h=F.pageY,P.addEventListener(o,aa,!1),P.addEventListener(p,d,!1)},aa=function(f){if(!l||!(f.touches.length>1||f.scale&&1!==f.scale)){var F=l?f.touches[0]:f;if(i=F.pageX-g,j=F.pageY-h,"undefined"==typeof s&&(s=!!(s||Math.abs(i)<Math.abs(j))),!s){switch(f.preventDefault(),X&&clearInterval(b),K){case"left":(0==U&&i>0||U>=S-1&&0>i)&&(i=0.4*i),B(-U*q+i,0);break;case"leftLoop":B(-(U+1)*q+i,0)}null!=T&&Math.abs(i)>q/3&&z(i>-0?-1:1)}}},d=function(f){0!=i&&(f.preventDefault(),s||(Math.abs(i)>q/10&&(i>0?U--:U++),n(!0),X&&(b=setInterval(function(){U++,n()},W))),P.removeEventListener(o,aa,!1),P.removeEventListener(p,d,!1))};P.addEventListener(m,u,!1)};