/*! SlotMachine - v2.0.7 - 2014-11-06
* https://github.com/josex2r/jQuery-SlotMachine
* Copyright (c) 2014 Jose Luis Represa; Licensed MIT */
;(function(h,j,k,c){var i="slotMachine",d={active:0,delay:200,auto:false,randomize:null,complete:null};var a="slotMachineBlurFast",f="slotMachineBlurMedium",e="slotMachineBlurSlow",l="slotMachineGradient",g=l;h(k).ready(function(){if(h("filter#slotMachineBlurFilterFast").length<=0){h("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterFast"><feGaussianBlur stdDeviation="5" /></filter></svg>')}if(h("filter#slotMachineBlurFilterMedium").length<=0){h("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterMedium"><feGaussianBlur stdDeviation="3" /></filter></svg>')}if(h("filter#slotMachineBlurFilterSlow").length<=0){h("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><filter id="slotMachineBlurFilterSlow"><feGaussianBlur stdDeviation="1" /></filter></svg>')}if(h("mask#slotMachineFadeMask").length<=0){h("body").append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="0" height="0"><mask id="slotMachineFadeMask" maskUnits="objectBoundingBox" maskContentUnits="objectBoundingBox"><linearGradient id="slotMachineFadeGradient" gradientUnits="objectBoundingBox" x="0" y="0"><stop stop-color="white" stop-opacity="0" offset="0"></stop><stop stop-color="white" stop-opacity="1" offset="0.25"></stop><stop stop-color="white" stop-opacity="1" offset="0.75"></stop><stop stop-color="white" stop-opacity="0" offset="1"></stop></linearGradient><rect x="0" y="-1" width="1" height="1" transform="rotate(90)" fill="url(#slotMachineFadeGradient)"></rect></mask></svg>')}h("body").append("<style>."+a+'{-webkit-filter: blur(5px);-moz-filter: blur(5px);-o-filter: blur(5px);-ms-filter: blur(5px);filter: blur(5px);filter: url(#slotMachineBlurFilterFast);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="5")}.'+f+'{-webkit-filter: blur(3px);-moz-filter: blur(3px);-o-filter: blur(3px);-ms-filter: blur(3px);filter: blur(3px);filter: url(#slotMachineBlurFilterMedium);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="3")}.'+e+'{-webkit-filter: blur(1px);-moz-filter: blur(1px);-o-filter: blur(1px);-ms-filter: blur(1px);filter: blur(1px);filter: url(#slotMachineBlurFilterSlow);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius="1")}.'+l+"{-webkit-mask-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(0,0,0,0)), color-stop(25%, rgba(0,0,0,1)), color-stop(75%, rgba(0,0,0,1)), color-stop(100%, rgba(0,0,0,0)) );mask: url(#slotMachineFadeMask);}</style>")});if(typeof h.easing.easeOutBounce!=="function"){h.extend(h.easing,{easeOutBounce:function(p,q,o,s,r){if((q/=r)<(1/2.75)){return s*(7.5625*q*q)+o}else{if(q<(2/2.75)){return s*(7.5625*(q-=(1.5/2.75))*q+0.75)+o}else{if(q<(2.5/2.75)){return s*(7.5625*(q-=(2.25/2.75))*q+0.9375)+o}else{return s*(7.5625*(q-=(2.625/2.75))*q+0.984375)+o}}}}})}function n(s,q){var r,p=this,v,u=s,o=arguments,t=q;this.running=false;this.onpause=function(){};this.onresume=function(){};this.cancel=function(){this.running=false;clearTimeout(v)};this.pause=function(){if(this.running){q-=new Date().getTime()-r;this.cancel();this.onpause()}};this.resume=function(){if(!this.running){this.running=true;r=new Date().getTime();v=setTimeout(function(){u.apply(p,Array.prototype.slice.call(o,2,o.length))},q);this.onresume()}};this.reset=function(){this.cancel();this.running=true;q=t;v=setTimeout(function(){u.apply(p,Array.prototype.slice.call(o,2,o.length))},t)};this.add=function(w){this.pause();q+=w;this.resume()};this.resume()}function m(p,o){this.element=p;this.settings=h.extend({},d,o);this.defaults=d;this.name=i;this.$slot=h(p);this.$tiles=this.$slot.children();this.$container=null;this._minTop=null;this._maxTop=null;this._$fakeFirstTile=null;this._$fakeLastTile=null;this._timer=null;this._oncompleteStack=[this.settings.complete];this._spinsLeft=null;this.futureActive=null;this.isRunning=false;this.active=this.settings.active;this.$slot.css("overflow","hidden");if(this.settings.active<0||this.settings.active>=this.$tiles.length){this.settings.active=0;this.active=0}this.$tiles.wrapAll("<div class='slotMachineContainer' />");this.$container=this.$slot.find(".slotMachineContainer");this._maxTop=-this.$container.height();this._$fakeFirstTile=this.$tiles.last().clone();this._$fakeLastTile=this.$tiles.first().clone();this.$container.prepend(this._$fakeFirstTile);this.$container.append(this._$fakeLastTile);this._minTop=-this._$fakeFirstTile.outerHeight();this.$container.css("margin-top",this.getTileOffset(this.active));if(this.settings.auto!==false){if(this.settings.auto===true){this.shuffle()}else{this.auto()}}}m.prototype.getTileOffset=function(o){var q=0;for(var p=0;p<o;p++){q+=h(this.$tiles.get(p)).outerHeight()}return -q+this._minTop};m.prototype.getVisibleTile=function(){var p=this.$tiles.first().height(),o=parseInt(this.$container.css("margin-top").replace(/px/,""),10);return Math.abs(Math.round(o/p))-1};m.prototype.setRandomize=function(o){if(typeof o==="number"){var p=function(){return o};this.settings.randomize=p}else{this.settings.randomize=o}};m.prototype.getRandom=function(q){var p,o=q||false;do{p=Math.floor(Math.random()*this.$tiles.length)}while((o&&p===this.active)&&p>=0);return p};m.prototype.getCustom=function(){var p;if(this.settings.randomize!==null&&typeof this.settings.randomize==="function"){var o=this.settings.randomize.apply(this,[this.active]);if(o<0||o>=this.$tiles.length){o=0}p=o}else{p=this.getRandom()}return p};m.prototype.getPrev=function(){var o=(this.active-1<0)?(this.$tiles.length-1):(this.active-1);return o};m.prototype.getNext=function(){var o=(this.active+1<this.$tiles.length)?(this.active+1):0;return o};m.prototype._setAnimationFX=function(p,q){var o=this;setTimeout(function(){o.$tiles.removeClass(a).removeClass(f).removeClass(e).addClass(p);if(q!==true||p===g){o.$slot.add(o.$tiles).removeClass(l)}else{o.$slot.add(o.$tiles).addClass(l)}},this.settings.delay/4)};m.prototype._resetPosition=function(){this.$container.css("margin-top",this.getTileOffset(this.active))};m.prototype.isVisible=function(){var o=this.$slot.offset().top>h(j).scrollTop()+h(j).height(),p=h(j).scrollTop()>this.$slot.height()+this.$slot.offset().top;return !o&&!p};m.prototype.prev=function(){this.futureActive=this.getPrev();this.isRunning=true;this.stop(false);return this.futureActive};m.prototype.next=function(){this.futureActive=this.getNext();this.isRunning=true;this.stop(false);return this.futureActive};m.prototype.shuffle=function(r,s){var o=this;if(s!==c){this._oncompleteStack[1]=s}this.isRunning=true;var p=this.settings.delay;if(this.futureActive===null){var q=this.getCustom();this.futureActive=q}if(typeof r==="number"){switch(r){case 1:case 2:this._setAnimationFX(e,true);break;case 3:case 4:this._setAnimationFX(f,true);p/=1.5;break;default:this._setAnimationFX(a,true);p/=2}}else{this._setAnimationFX(a,true);p/=2}this.$container.animate({marginTop:this._maxTop},p,"linear",function(){o.$container.css("margin-top",0);if(r-1<=0){o.stop()}else{o.shuffle(r-1)}});return this.futureActive};m.prototype.stop=function(o){if(!this.isRunning){return}var p=this;this.$container.clearQueue().stop(true,false);this._setAnimationFX(e,o===c?true:o);this.isRunning=true;this.active=this.getVisibleTile();if(this.futureActive>this.active){if(this.active===0&&this.futureActive===this.$tiles.length-1){this.$container.css("margin-top",this.getTileOffset(this.$tiles.length))}}else{if(this.active===this.$tiles.length-1&&this.futureActive===0){this.$container.css("margin-top",0)}}this.active=this.futureActive;this.futureActive=null;var q=this.settings.delay*3;this.$container.animate({marginTop:this.getTileOffset(this.active)},q,"easeOutBounce",function(){p.isRunning=false;if(typeof p._oncompleteStack[0]==="function"){p._oncompleteStack[0].apply(p,[p.active])}if(typeof p._oncompleteStack[1]==="function"){p._oncompleteStack[1].apply(p,[p.active])}});setTimeout(function(){p._setAnimationFX(g,false)},q/1.75);return this.active};m.prototype.auto=function(){var o=this;this._timer=new n(function(){if(typeof o.settings.randomize!=="function"){o.futureActive=o.getNext()}o.isRunning=true;o.shuffle(5,function(){o._timer.reset()})},this.settings.auto)};function b(p,o){var q;if(!h.data(p[0],"plugin_"+i)){q=new m(p,o);h.data(p[0],"plugin_"+i,q)}else{q=h.data(p[0],"plugin_"+i)}return q}h.fn[i]=function(o){if(this.length===1){return b(this,o)}else{return this.each(function(){if(!h.data(this,"plugin_"+i)){b(this,o)}})}}})(jQuery,window,document);