/*! fly - v1.0.0 - 2014-12-22
* https://github.com/amibug/fly
* Copyright (c) 2014 wuyuedong; Licensed MIT */
;!function(b){b.fly=function(a,j){var i={version:"1.0.0",autoPlay:!0,vertex_Rtop:20,speed:1.2,start:{},end:{},onEnd:b.noop},h=this,g=b(a);h.init=function(c){this.setOptions(c),!!this.settings.autoPlay&&this.play()},h.setOptions=function(u){this.settings=b.extend(!0,{},i,u);var t=this.settings,s=t.start,r=t.end;g.css({marginTop:"0px",marginLeft:"0px",position:"fixed"}).appendTo("body"),null!=r.width&&null!=r.height&&b.extend(!0,s,{width:g.width(),height:g.height()});var q=Math.min(s.top,r.top)-Math.abs(s.left-r.left)/3;q<t.vertex_Rtop&&(q=Math.min(t.vertex_Rtop,Math.min(s.top,r.top)));var p=Math.sqrt(Math.pow(s.top-r.top,2)+Math.pow(s.left-r.left,2)),o=Math.ceil(Math.min(Math.max(Math.log(p)/0.05-75,30),100)/t.speed),n=s.top==q?0:-Math.sqrt((r.top-q)/(s.top-q)),f=(n*s.left-r.left)/(n-1),d=r.left==f?0:(r.top-q)/Math.pow(r.left-f,2);b.extend(!0,t,{count:-1,steps:o,vertex_left:f,vertex_top:q,curvature:d})},h.play=function(){this.move()},h.move=function(){var w=this.settings,v=w.start,u=w.count,t=w.steps,s=w.end,r=v.left+(s.left-v.left)*u/t,q=0==w.curvature?v.top+(s.top-v.top)*u/t:w.curvature*Math.pow(r-w.vertex_left,2)+w.vertex_top;if(null!=s.width&&null!=s.height){var p=t/2,o=s.width-(s.width-v.width)*Math.cos(p>u?0:(u-p)/(t-p)*Math.PI/2),n=s.height-(s.height-v.height)*Math.cos(p>u?0:(u-p)/(t-p)*Math.PI/2);g.css({width:o+"px",height:n+"px","font-size":Math.min(o,n)+"px"})}g.css({left:r+"px",top:q+"px"}),w.count++;var f=window.requestAnimationFrame(b.proxy(this.move,this));u==t&&(window.cancelAnimationFrame(f),w.onEnd.apply(this))},h.destory=function(){g.remove()},h.init(j)},b.fn.fly=function(a){return this.each(function(){void 0==b(this).data("fly")&&b(this).data("fly",new b.fly(this,a))})}}(jQuery);