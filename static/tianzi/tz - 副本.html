<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta content="email=no" name="format-detection">
<meta content="no" name="msapplication-tap-highlight">
<title></title>
<style>
html{font-size:125%}@media (min-width:320px){html{font-size:125%}}@media (min-width:321px){html{font-size:125.39063%}}@media (min-width:322px){html{font-size:125.78125%}}@media (min-width:323px){html{font-size:126.17188%}}@media (min-width:324px){html{font-size:126.5625%}}@media (min-width:325px){html{font-size:126.95313%}}@media (min-width:326px){html{font-size:127.34375%}}@media (min-width:327px){html{font-size:127.73438%}}@media (min-width:328px){html{font-size:128.125%}}@media (min-width:329px){html{font-size:128.51563%}}@media (min-width:330px){html{font-size:128.90625%}}@media (min-width:331px){html{font-size:129.29688%}}@media (min-width:332px){html{font-size:129.6875%}}@media (min-width:333px){html{font-size:130.07813%}}@media (min-width:334px){html{font-size:130.46875%}}@media (min-width:335px){html{font-size:130.85938%}}@media (min-width:336px){html{font-size:131.25%}}@media (min-width:337px){html{font-size:131.64063%}}@media (min-width:338px){html{font-size:132.03125%}}@media (min-width:339px){html{font-size:132.42188%}}@media (min-width:340px){html{font-size:132.8125%}}@media (min-width:341px){html{font-size:133.20313%}}@media (min-width:342px){html{font-size:133.59375%}}@media (min-width:343px){html{font-size:133.98438%}}@media (min-width:344px){html{font-size:134.375%}}@media (min-width:345px){html{font-size:134.76563%}}@media (min-width:346px){html{font-size:135.15625%}}@media (min-width:347px){html{font-size:135.54688%}}@media (min-width:348px){html{font-size:135.9375%}}@media (min-width:349px){html{font-size:136.32813%}}@media (min-width:350px){html{font-size:136.71875%}}@media (min-width:351px){html{font-size:137.10938%}}@media (min-width:352px){html{font-size:137.5%}}@media (min-width:353px){html{font-size:137.89063%}}@media (min-width:354px){html{font-size:138.28125%}}@media (min-width:355px){html{font-size:138.67188%}}@media (min-width:356px){html{font-size:139.0625%}}@media (min-width:357px){html{font-size:139.45313%}}@media (min-width:358px){html{font-size:139.84375%}}@media (min-width:359px){html{font-size:140.23438%}}@media (min-width:360px){html{font-size:140.625%}}@media (min-width:361px){html{font-size:141.01563%}}@media (min-width:362px){html{font-size:141.40625%}}@media (min-width:363px){html{font-size:141.79688%}}@media (min-width:364px){html{font-size:142.1875%}}@media (min-width:365px){html{font-size:142.57813%}}@media (min-width:366px){html{font-size:142.96875%}}@media (min-width:367px){html{font-size:143.35938%}}@media (min-width:368px){html{font-size:143.75%}}@media (min-width:369px){html{font-size:144.14063%}}@media (min-width:370px){html{font-size:144.53125%}}@media (min-width:371px){html{font-size:144.92188%}}@media (min-width:372px){html{font-size:145.3125%}}@media (min-width:373px){html{font-size:145.70313%}}@media (min-width:374px){html{font-size:146.09375%}}@media (min-width:375px){html{font-size:146.48438%}}@media (min-width:376px){html{font-size:146.875%}}@media (min-width:377px){html{font-size:147.26563%}}@media (min-width:378px){html{font-size:147.65625%}}@media (min-width:379px){html{font-size:148.04688%}}@media (min-width:380px){html{font-size:148.4375%}}@media (min-width:381px){html{font-size:148.82813%}}@media (min-width:382px){html{font-size:149.21875%}}@media (min-width:383px){html{font-size:149.60938%}}@media (min-width:384px){html{font-size:150%}}@media (min-width:385px){html{font-size:150.39063%}}@media (min-width:386px){html{font-size:150.78125%}}@media (min-width:387px){html{font-size:151.17188%}}@media (min-width:388px){html{font-size:151.5625%}}@media (min-width:389px){html{font-size:151.95313%}}@media (min-width:390px){html{font-size:152.34375%}}@media (min-width:391px){html{font-size:152.73438%}}@media (min-width:392px){html{font-size:153.125%}}@media (min-width:393px){html{font-size:153.51563%}}@media (min-width:394px){html{font-size:153.90625%}}@media (min-width:395px){html{font-size:154.29688%}}@media (min-width:396px){html{font-size:154.6875%}}@media (min-width:397px){html{font-size:155.07813%}}@media (min-width:398px){html{font-size:155.46875%}}@media (min-width:399px){html{font-size:155.85938%}}@media (min-width:400px){html{font-size:156.25%}}@media (min-width:401px){html{font-size:156.64063%}}@media (min-width:402px){html{font-size:157.03125%}}@media (min-width:403px){html{font-size:157.42188%}}@media (min-width:404px){html{font-size:157.8125%}}@media (min-width:405px){html{font-size:158.20313%}}@media (min-width:406px){html{font-size:158.59375%}}@media (min-width:407px){html{font-size:158.98438%}}@media (min-width:408px){html{font-size:159.375%}}@media (min-width:409px){html{font-size:159.76563%}}@media (min-width:410px){html{font-size:160.15625%}}@media (min-width:411px){html{font-size:160.54688%}}@media (min-width:412px){html{font-size:160.9375%}}@media (min-width:413px){html{font-size:161.32813%}}@media (min-width:414px){html{font-size:161.71875%}}@media (min-width:415px){html{font-size:162.10938%}}@media (min-width:416px){html{font-size:162.5%}}@media (min-width:417px){html{font-size:162.89063%}}@media (min-width:418px){html{font-size:163.28125%}}@media (min-width:419px){html{font-size:163.67188%}}@media (min-width:424px){html{font-size:165.625%}}@media (min-width:480px){html{font-size:187.5%}}@media (min-width:540px){html{font-size:210.9375%}}@media (min-width:600px){html{font-size:234.375%}}@media (min-width:720px){html{font-size:281.25%}}@media (min-width:768px){html{font-size:300%}}@media (min-width:800px){html{font-size:312.5%}}@media (min-width:900px){html{font-size:351.5625%}}@media (min-width:950px){html{font-size:371.09375%}}@media (min-width:1200px){html{font-size:468.75%}}@media (min-width:1600px){html{font-size:625%}}
html {
  overflow-y: scroll;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  -webkit-user-select: none;
  user-select: none;
}
html * {
  outline: none;
  -webkit-touch-callout: none;
  -webkit-text-size-adjust: none;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}
body{min-width:320px;font-size:0.6rem; font-family:'\5fae\8f6f\96c5\9ed1',simsun,Arial,sans-serif; background-color:#F8ECDA;color:#000;}
/* ============================================================
   flex：定义布局为盒模型
   flex-v：盒模型垂直布局
   flex-1：子元素占据剩余的空间
   flex-align-center：子元素垂直居中 ->简写 flex-ac
   flex-pack-center：子元素水平居中   ->简写 flex-pc
   flex-pack-justify：子元素两端对齐 ->简写 flex-pj
   兼容性：ios 4+、android 2.3+、winphone8+
============================================================ */
.flex{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}
.flex-v{-webkit-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}
.flex-1{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;}
.flex-ac{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;}
.flex-pc{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
.flex-pj{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}
    body,div,ul,li{margin:0;padding:0;}
    .box ul,.box2 ul{margin:1.25rem auto 0;width:13.5rem;overflow:hidden;list-style:none;}
    .box li,.box2 li{margin:0 0.275rem 0.55rem;width:2.15rem;height:2.15rem;line-height:2.15rem;background:url(bg_zi.png) no-repeat;background-size:100%;font-size:1.6rem;text-align:center;color:#333;}
    .box li{float:left;}
    .box li.on,.box2 li{color:#f00;}
    .tips{text-align:center;}
    .tips p{display:none;}
</style>
</head>

<body>
<div id="box" class="box"></div>
<div id="box-tips" class="tips"></div>
<div id="box2" class="box2"></div>

<script src="jquery-1.7.2.min.js"></script>
<script>
var da = [];
$(function(){
    
  loadData();


}) ; 
function loadData(){
  $.ajax({
    type: 'get',
    url: 'qa.json',
    dataType: 'json',
    success: function(responseText){ 

      getData(responseText);
        
    },
    error: function(){

    },
    complete: function(){
      var game = new Game();
      console.log(da)
    }
  });
}

function getData(responseText){

  var data = getArrayItems(responseText,3);
  var aTips = '';

  for(var i=0; i<data.length; i++){

    var arrQue = data[i].que;
    //var arrQue = question.split("");

    var arrAns = data[i].ans;
    //var arrAns = answer.split("");

    var oUl = document.createElement('ul');
    oUl.style.display = 'none';
    oUl.setAttribute("id","q-box"+i);

    var oUl2 = document.createElement('ul');
    oUl2.style.display = 'none';
    oUl2.setAttribute("id","a-box"+i);
    oUl2.setAttribute("class","flex flex-ac flex-pc");

    var da2 = [];

    for(var j=0; j<arrQue.length; j++){
      var oLi = document.createElement('li');
      oLi.innerHTML = arrQue[j];
      oUl.appendChild(oLi);
    }

    for(var j=0; j<arrAns.length; j++){
      var oLi2 = document.createElement('li');
      //oLi2.innerHTML = arrAns[j];
      oUl2.appendChild(oLi2);
      da2.push(arrAns[j]);
    }
    da.push(da2);
    $("#box").append(oUl);
    $("#box2").append(oUl2);
    aTips += '<p>提示：'+ data[i].tip +'</p>';
    
  }
  
  $("#box-tips").append(aTips);

}

//从一个给定的数组arr中,随机返回num个不重复项
function getArrayItems(arr, num) {
  //新建一个数组,将传入的数组复制过来,用于运算,而不要直接操作传入的数组;
  var temp_array = new Array();
  for (var index in arr) {
    temp_array.push(arr[index]);
  }
  //取出的数值项,保存在此数组
  var return_array = new Array();
  for (var i = 0; i<num; i++) {
    //判断如果数组还有可以取出的元素,以防下标越界
    if (temp_array.length>0) {
      //在数组中产生一个随机索引
      var arrIndex = Math.floor(Math.random()*temp_array.length);
      //将此随机索引的对应的数组元素值复制出来
      return_array[i] = temp_array[arrIndex];
      //然后删掉此索引的数组元素,这时候temp_array变为新的数组
      temp_array.splice(arrIndex, 1);
    } else {
      //数组中数据项取完后,退出循环,比如数组本来只有10项,但要求取出20项.
      break;
    }
  }
  return return_array;
}

function Game(){
  this.aUl = $('#box ul');
  this.aUl2 = $('#box2 ul');
  this.aP = $('#box-tips p');
  this.level = 0;
  this.index = 0;
  this.len = 0;
  this.flag = true;
  this.da2 = [];
  this.aLi1 = $(this.aUl[this.index]).find('li');
  this.aLi2 = $(this.aUl2[this.index]).find('li');

  this.init();
}
Game.prototype = {
  constructor: Game,
  init: function(){ 

    this.aUl[this.index].style.display = '';
    this.aUl2[this.index].style.display = '';
    this.aP[this.index].style.display = 'block';
    
    this.start();
  },
  start: function(){
    // var aLi1 = $(this.aUl[this.index]).find('li');
    // var aLi2 = $(this.aUl2[this.index]).find('li');
    var _this = this;
    if(_this.flag){

      $(_this.aLi1).on('click', function(){      
        _this.aLiClick1(this);
      });
        
      $(_this.aLi2).on('click', function(){
        _this.aLiClick2(this);      
      });
    }else{
      $(_this.aLi1).off('click');
    }

  },
  aLiClick1: function(that){
    var _this = this;
    var that = that;

    if(_this.len < _this.aLi2.length){
      var ind = $(that).index();
      $(that).addClass('on');
      //$(aLi2[_this.len]).addClass('on');
      $(this.aUl2[this.index]).find('li')[_this.len].innerHTML = that.innerHTML;
      _this.aLi2[_this.len].index2 = ind;
      _this.da2.push(that.innerHTML);
      console.log(_this.da2)
      console.log(_this.len)

      _this.len++;
      $(that).off('click');
    }
    if(_this.len === _this.aLi2.length){
      _this.flag = false;
      // $(_this.aLi1).off('click');
      console.log(_this.da2.toString() == da[_this.index].toString())     
    }
  },
  aLiClick2: function(that){
    var _this = this;
    var that = that;

    if(that.innerHTML){
      var ind = $(that).index();
      _this.da2.splice(ind, 1);

      that.innerHTML = '';
      $(_this.aUl2[_this.index]).append(that);
      $(_this.aLi1).eq(that.index2).removeClass('on');

      // $(_this.aLi1).on('click', function(){      
      //   _this.aLiClick1(this);
      // });
      _this.len>0?_this.len--:0;
      console.log(_this.len)
      _this.flag = true;

    }
  }
};
</script>
</body>
</html>